runs:
  using: "composite"
  steps:
   # checkout
    - uses: actions/checkout@v3
    # build api
    - uses: ./.github/actions/build/dotnet/jobs/aspnet-core.job.yaml
      with:
        display-name: Build Blab API
        apply-versioning: true
        projects: './src/LeedsGalvanising.Api/src/LeedsGalvanising.Api/LeedsGalvanising.Api.csproj'
        # tests: '' # Run all csproj which match the pattern **/*.Tests.csproj
        # should-run-tests: true # TODO: Uncomment when deploying working
    # build identity
    - uses: ./.github/actions/build/dotnet/jobs/aspnet-core.job.yaml
      with:
        display-name: Build Blab Identity
        apply-versioning: true
        projects: './src/LeedsGalvanising.Api/src/LeedsGalvanising.Identity/LeedsGalvanising.Identity.csproj'
        # tests: '' # Run all csproj which match the pattern **/*.Tests.csproj
        # should-run-tests: true # TODO: Uncomment when deploying working
    # build vue app
    - uses: ./.github/actions/build/npm/jobs/npm-application.job.yaml
      with:
        display-name: Build Blab SPA
        apply-versioning: true
        projects: './src/LeedsGalvanising.Ui'
        # tests: '' # Run all csproj which match the pattern **/*.Tests.csproj
        # should-run-tests: true # TODO: Uncomment when deploying working